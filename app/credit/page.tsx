'use client';

import BankChip from '@/components/BankChip';
import FileForm from '@/forms/FileForm/FileForm';
import { InsightsContext } from '@/providers/InsightsContext';
import ReactQueryProvider from '@/providers/ReactQueryProvider';
import { useState } from 'react';
import Analysis from '@/modules/analysis';
import Bar from '@/components/Graph/Bar';

const availableBanks = ['Davivienda'];

export default function Home() {
  const [insights, setInsights] = useState<TResponse | undefined>({
    parsed: [
      {
        date: '16-06-2023',
        description: 'SANDRA NIETO GONZALEZ',
        amount: 150000,
        day: '16',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '16-06-2023',
        description: 'RADIOLOGIA ORAL UNICENTRO',
        amount: 250000,
        day: '16',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '16-06-2023',
        description: 'RAPPI RESTAURANTE.',
        amount: 29250,
        day: '16',
        month: '06',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '16-06-2023',
        description: 'INTERES CORRIEN',
        amount: 1288,
        day: '16',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '15-06-2023',
        description: 'NETFLIX01*DL',
        amount: 38900,
        day: '15',
        month: '06',
        year: '2023',
        type: 'netflix',
      },
      {
        date: '12-06-2023',
        description: 'RAPPI RESTAURANTE.',
        amount: 55250,
        day: '12',
        month: '06',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '11-06-2023',
        description: 'RAPPI RESTAURANTE.',
        amount: 37950,
        day: '11',
        month: '06',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '10-06-2023',
        description: 'CABIFY',
        amount: 22173,
        day: '10',
        month: '06',
        year: '2023',
        type: 'rides',
      },
      {
        date: '10-06-2023',
        description: 'CABIFY',
        amount: 18140,
        day: '10',
        month: '06',
        year: '2023',
        type: 'rides',
      },
      {
        date: '10-06-2023',
        description: 'MARIA CAMILA RODRIGUEZ',
        amount: 40000,
        day: '10',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '10-06-2023',
        description: 'CINEMARK LA COLINA',
        amount: 24400,
        day: '10',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '10-06-2023',
        description: 'UBER*RIDES*DL',
        amount: 17030,
        day: '10',
        month: '06',
        year: '2023',
        type: 'rides',
      },
      {
        date: '10-06-2023',
        description: 'MC DONALD S',
        amount: 71700,
        day: '10',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '10-06-2023',
        description: 'MC DONALD S',
        amount: 3500,
        day: '10',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '10-06-2023',
        description: 'CARLOS ALVAREZ PELUQUERIA',
        amount: 55000,
        day: '10',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '09-06-2023',
        description: 'RAPPI PRIME.',
        amount: 16900,
        day: '09',
        month: '06',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '09-06-2023',
        description: 'RAPPI RESTAURANTE.',
        amount: 36850,
        day: '09',
        month: '06',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '09-06-2023',
        description: 'RAPPI RESTAURANTE.',
        amount: 36350,
        day: '09',
        month: '06',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '08-06-2023',
        description: 'WANIKANI JAPANESE LANG',
        amount: 37995,
        day: '08',
        month: '06',
        year: '2023',
        type: 'wanikani',
      },
      {
        date: '07-06-2023',
        description: 'COMPRAS WEB CMK COLOMBIA',
        amount: 113100,
        day: '07',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '07-06-2023',
        description: 'UNE TELCO UNE PAGO EXPRESS',
        amount: 59500,
        day: '07',
        month: '06',
        year: '2023',
        type: 'tigo',
      },
      {
        date: '04-06-2023',
        description: 'REST CAFET RECETAS DE LA ABUE',
        amount: 106000,
        day: '04',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '03-06-2023',
        description: 'CNVRS UNICENTRO',
        amount: 359950,
        day: '03',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '03-06-2023',
        description: 'GRAN PARRILLA BOYACENSE',
        amount: 139000,
        day: '03',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '02-06-2023',
        description: 'OSAKI USAQUEN',
        amount: 53991,
        day: '02',
        month: '06',
        year: '2023',
        type: 'other',
      },
      {
        date: '02-06-2023',
        description: 'UBER*RIDES*DL',
        amount: 15150,
        day: '02',
        month: '06',
        year: '2023',
        type: 'rides',
      },
      {
        date: '02-06-2023',
        description: 'UBER*RIDES*DL',
        amount: 20150,
        day: '02',
        month: '06',
        year: '2023',
        type: 'rides',
      },
      {
        date: '02-06-2023',
        description: 'UBER*RIDES*DL',
        amount: 20000,
        day: '02',
        month: '06',
        year: '2023',
        type: 'rides',
      },
      {
        date: '01-06-2023',
        description: 'RAPPI RESTAURANTES CBS',
        amount: 29250,
        day: '01',
        month: '06',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '30-05-2023',
        description: 'RAPPI RESTAURANTE.',
        amount: 92650,
        day: '30',
        month: '05',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '27-05-2023',
        description: 'UBER*RIDES*DL',
        amount: 20720,
        day: '27',
        month: '05',
        year: '2023',
        type: 'rides',
      },
      {
        date: '27-05-2023',
        description: 'BUFFET TIME',
        amount: 54600,
        day: '27',
        month: '05',
        year: '2023',
        type: 'other',
      },
      {
        date: '27-05-2023',
        description: 'UBER*RIDES*DL',
        amount: 22720,
        day: '27',
        month: '05',
        year: '2023',
        type: 'rides',
      },
      {
        date: '26-05-2023',
        description: 'UBER*RIDES*DL',
        amount: 22610,
        day: '26',
        month: '05',
        year: '2023',
        type: 'rides',
      },
      {
        date: '24-05-2023',
        description: 'RAPPI RESTAURANTE.',
        amount: 40250,
        day: '24',
        month: '05',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '22-05-2023',
        description: 'Spotify P233CABE2A',
        amount: 15049,
        day: '22',
        month: '05',
        year: '2023',
        type: 'spotify',
      },
      {
        date: '22-05-2023',
        description: 'RAPPI RESTAURANTE.',
        amount: 35550,
        day: '22',
        month: '05',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '21-05-2023',
        description: 'RAPPI RESTAURANTE.',
        amount: 48750,
        day: '21',
        month: '05',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '20-05-2023',
        description: 'RAPPI RESTAURANTE.',
        amount: 36950,
        day: '20',
        month: '05',
        year: '2023',
        type: 'delivery',
      },
      {
        date: '13-05-2023',
        description: 'UBER *TRIP HELP.UBER.COM',
        amount: 20513,
        day: '13',
        month: '05',
        year: '2023',
        type: 'rides',
      },
      {
        date: '09-05-2023',
        description: 'WANIKANI JAPANESE LANG',
        amount: 40819,
        day: '09',
        month: '05',
        year: '2023',
        type: 'wanikani',
      },
      {
        date: '16-06-2023',
        description: 'CUOTA DE SEGURO 00008777',
        amount: 2990,
        day: '16',
        month: '06',
        year: '2023',
        type: 'other',
      },
    ],
    agg: [
      {
        year: '2023',
        month: '05',
        type: 'delivery',
        date: '30-05-202324-05-202322-05-202321-05-202320-05-2023',
        description:
          'RAPPI RESTAURANTE.RAPPI RESTAURANTE.RAPPI RESTAURANTE.RAPPI RESTAURANTE.RAPPI RESTAURANTE.',
        amount: 254150,
        day: '3024222120',
      },
      {
        year: '2023',
        month: '05',
        type: 'spotify',
        date: '22-05-2023',
        description: 'Spotify P233CABE2A',
        amount: 15049,
        day: '22',
      },
      {
        year: '2023',
        month: '05',
        type: 'wanikani',
        date: '09-05-2023',
        description: 'WANIKANI JAPANESE LANG',
        amount: 40819,
        day: '09',
      },
      {
        year: '2023',
        month: '06',
        type: 'netflix',
        date: '15-06-2023',
        description: 'NETFLIX01*DL',
        amount: 38900,
        day: '15',
      },
      {
        year: '2023',
        month: '06',
        type: 'other',
        date: '16-06-202316-06-202316-06-202310-06-202310-06-202310-06-202310-06-202310-06-202307-06-202304-06-202303-06-202303-06-202302-06-202316-06-2023',
        description:
          'SANDRA NIETO GONZALEZRADIOLOGIA ORAL UNICENTROINTERES CORRIENMARIA CAMILA RODRIGUEZCINEMARK LA COLINAMC DONALD SMC DONALD SCARLOS ALVAREZ PELUQUERIACOMPRAS WEB CMK COLOMBIAREST CAFET RECETAS DE LA ABUECNVRS UNICENTROGRAN PARRILLA BOYACENSEOSAKI USAQUENCUOTA DE SEGURO 00008777',
        amount: 1370919,
        day: '1616161010101010070403030216',
      },
      {
        year: '2023',
        month: '06',
        type: 'rides',
        date: '10-06-202310-06-202310-06-202302-06-202302-06-202302-06-2023',
        description:
          'CABIFYCABIFYUBER*RIDES*DLUBER*RIDES*DLUBER*RIDES*DLUBER*RIDES*DL',
        amount: 112643,
        day: '101010020202',
      },
      {
        year: '2023',
        month: '06',
        type: 'tigo',
        date: '07-06-2023',
        description: 'UNE TELCO UNE PAGO EXPRESS',
        amount: 59500,
        day: '07',
      },
    ],
  });
  return (
    <InsightsContext.Provider
      value={{
        insights,
        setInsights,
      }}
    >
      <ReactQueryProvider>
        <div className="flex flex-col items-center justify-center gap-y-12 container w-full">
          <div className="flex flex-col gap-5 items-center justify-center">
            <h3 className="text-xl font-medium text-center">Supported banks</h3>
            <div className="flex flex-row gap-2 flex-wrap justify-center">
              {availableBanks.map((bank: string) => (
                <BankChip key={bank} name={bank} />
              ))}
              <BankChip name="More to come!" />
            </div>
          </div>
          {/* <button className="px-4 py-2 font-medium text-md bg-secondary text-text rounded-md shadow-sm ease-in-out duration-300 hover:bg-primary hover:text-white hover:scale-110 hidden">
          This is the worst practice I have ever done throughout my whole career
        </button> */}

          {insights ? <Analysis /> : <FileForm />}
        </div>
      </ReactQueryProvider>
    </InsightsContext.Provider>
  );
}
